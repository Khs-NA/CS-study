# 3. 트랜잭션과 무결성
> 트랜잭션은 데이터베이스에서 하나의 논리적 기능을 수행하기 위한 작업의 단위

- 데이터베이스에 접근하는 방법 = 쿼리
- 여러개의 쿼리를 하나로 묶는 단위
- 원자성, 일관성, 독립성, 지속성을 가짐 -> ACID 특징

## 원자성
> "All or Nothing"

- 트랜잭션과 관련된 일이 모두 수행되었거나 되지 않았거나를 보장
- 외부 API 호출된 것이 존재 X
- 롤백이 되었을 때 해결 방법이 있어야 함

## 커밋과 롤백
- 커밋(commit)은 여러 쿼리가 성공적으로 처리되었다고 확정하는 명렁어
- 변경된 내용이 모두 영구적으로 저장
- 커밋이 수행됨 -> 하나의 트랜잭션이 성공적으로 수행됨
- 커밋(update -> insert -> delete, 이게 하나의 트랜잭션 단위) -> DB에 저장
  
- 롤백은 트랜잭션으로 처리한 하나의 묶음 과정을 일어나기 전으로 돌리는 일
- 커밋과 롤백 덕에 데이터의 무결성이 보장
- 데이터 변경 전에 변경 사항을 쉽게 확인, 해당 작업을 그룹화

## 트랜잭션 전파
- 트랜잭션 수행시 커넥션 단위 수행 때문에 커넥션 객체를 넘겨서 수행 -> 어렵고 귀찮다.
- 여러 트랜잭션 관련 메서드의 호출을 하나의 트랜잭션에 묶이도록 하는 것

## 일관성(consistency)
- '허용된 방식'으로만 데이터를 변경해야 하는 것을 의미
- 데이터베이스에 기록된 모든 데이터는 여러 조건과 규칙에 따른 유효함을 가진다.

## 격리성(isolation)
- 트랜잭션 수행 시 서로 끼어들지 못하는 것을 말합니다.
- 병렬 트랜잭션 수행 시 순차적 실행처럼 보여야함(격리 수준에 따라 나뉨), 데이터베이스는 여러 사용자가 같은 데이터에 접근 가능해야 함
- 격리 수준에 따라 팬텀 리드, 반복 가능하지 않은 조회, 더티 리드가 있다.
- 팬텀 리드 : 한 트랜잭션 내에서 동일한 쿼리를 보냈을 때 해당 조회 결과가 다른 경우
- 반복 가능하지 않은 조회 : 한 트랜잭션 내의 같은 행에 두 번 이상 조회가 발생했지만, 그 값이 다른 경우
- 더티 리드 : 아직 '커밋되지 않은' 데이터를 읽을 수 있을 때 발생

## 지속성(durability)
- 성공적으로 수행된 트랜잭션은 영원히 반영되어야 함
- 체크섬(중복 검사,자료의 무결성을 보호), 저널링(변경 사항에 대한 로그), 롤백 등의 기능으로 유지

## 무결성
> 데이터의 정확성, 일관성, 유효성을 유지하는 것
- 무결성이 유지되어야 데이터베이스 값과 현실 세계 값이 일치하는가에 대한 신뢰가 생김
- 개체 무결성, 참조 무결성, 고유 무결성, NULL 무결성이 존재


# 4. 데이터베이스의 종류

## 관계형 데이터베이스
- 행과 열을 가지는 표 형식 데이터를 저장하는 형태의 데이터베이스
- SQL라는 언어를 써서 조작, MySQL(가장 많이 씀), PostgreSQL 등등

## NoSQL 데이터베이스
- SQL을 사용하지 않는 데이터베이스
- MongoDB, redis